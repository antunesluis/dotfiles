# Configurações específicas para GPUs NVIDIA no Hyprland
# Referência: https://wiki.hyprland.org/hyprland-wiki/pages/Nvidia/

# 1. Desativa cursores de hardware (necessário para evitar problemas com o Wayland)
# env = WLR_NO_HARDWARE_CURSORS,1

# 2. Aceleração de hardware para NVIDIA
# Define o driver VA-API (Video Acceleration API) como NVIDIA.
# Necessário para decodificação de vídeo acelerada por hardware.
# env = LIBVA_DRIVER_NAME,nvidia

# 3. Backend GBM (Generic Buffer Management)
# Força o uso do GBM como backend gráfico para evitar problemas com Wayland.
# env = GBM_BACKEND,nvidia-drm

# 4. Driver OpenGL
# Define o driver OpenGL como NVIDIA para garantir compatibilidade.
# env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# 5. Configurações de sincronização (GSync/VRR)
# Desativa GSync e VRR para evitar problemas em alguns jogos e aplicações.
# env = __GL_GSYNC_ALLOWED,0
# env = __GL_VRR_ALLOWED,0

# 6. Aceleração OpenGL
# Habilita aceleração OpenGL para melhor desempenho.
# env = __GLX_ACCELERATE,1

# 7. Modo de configuração DRM
# Usa o modo de configuração DRM não atômico (pode resolver flickering em alguns casos).
# env = WLR_DRM_NO_ATOMIC,1

# 8. Tipo de sessão
# Define a sessão como Wayland (necessário para Hyprland).
# env = XDG_SESSION_TYPE,wayland

# ---

# Configurações específicas para GPUs NVIDIA no Hyprland
# Referência: https://wiki.hyprland.org/hyprland-wiki/pages/Nvidia/

# 1. Desativa cursores de hardware (necessário para evitar problemas com o Wayland)
env = WLR_NO_HARDWARE_CURSORS,1

# 2. Aceleração de hardware para NVIDIA
env = LIBVA_DRIVER_NAME,nvidia

# 3. Backend GBM (Generic Buffer Management)
env = GBM_BACKEND,nvidia-drm

# 4. Driver OpenGL
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# 5. Configurações de sincronização (GSync/VRR)
# NOTA: Essas configurações podem causar problemas em alguns setups
# Se tiver problemas, tente comentar estas linhas
env = __GL_GSYNC_ALLOWED,0
env = __GL_VRR_ALLOWED,0

# 6. REMOVIDO: __GLX_ACCELERATE (não é necessário)

# 7. REMOVIDO: WLR_DRM_NO_ATOMIC (pode causar problemas)
# Se tiver flickering, descomente a linha abaixo:
# env = WLR_DRM_NO_ATOMIC,1

# 8. Tipo de sessão
env = XDG_SESSION_TYPE,wayland

# 9. ADICIONADO: Configurações para reduzir memory leaks
# Força garbage collection mais agressiva
env = __GL_SHADER_DISK_CACHE_SKIP_CLEANUP,1

# 10. ADICIONADO: Melhora a performance com NVIDIA
env = PROTON_ENABLE_NVAPI,1
env = PROTON_HIDE_NVIDIA_GPU,0

# 11. Para resolver problemas de tearing com NVIDIA
# env = WLR_DRM_NO_MODIFIERS,1  # Descomente se tiver problemas de tearing
